services:
  claude-flow:
    build:
      context: .
      dockerfile: Dockerfile
    container_name: claude-flow

    # Expose SSE port for MCP
    ports:
      - "8080:8080"

    # Volumes for persistence
    volumes:
      # Claude-Flow databases (AgentDB, ReasoningBank)
      - claude-flow-db:/root/.claude-flow

      # Optional: share downloaded npm packages
      - node-modules-cache:/root/.npm

    # Environment variables
    environment:
      - NODE_ENV=production

    # Restart policy
    restart: unless-stopped

# Named volumes for persistence
volumes:
  claude-flow-db:
    driver: local
  node-modules-cache:
    driver: local
